<%- include('../partials/html-head') %>
<link rel="stylesheet" href="/stylesheets/style.css">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
<%- include('../partials/nav') %>

<main>
  <h1> User Check-Ins</h1>
  <% checkins.forEach(checkin => { %>
    <div 
    class="card" 
    style="width: 18rem;
    height: auto;
    margin-top: 100px"
    >
    <% if (checkin.owner.avatar) { %>
      <img
        src="<%= checkin.owner.avatar %>" class="card-img-top"
        alt="<%= checkin.owner.name %> avatar"
      />
      <div class="card-body">
        <h4 class-="card-title checkin-username" style="font-weight: 700;"> <%= checkin.owner.name %> 
        </h4>
        <p class="card-text" style="font-size: 1.5rem;">
          <%= checkin.name %>
        </p>
      </div>
      <ul class="list-group list-group-flush">
        <li class="list-group-item" id="checkin-rating">Rating: <%= checkin.rating %>
        </li>
        <li class="list-group-item" id="checkin-beverage">Drink: <%= checkin.beverage.name %>
        </li>
        <li class="list-group-item" id="checkin-location">Location: <%= checkin.location %>
        </li>
        <li class="list-group-item" id="checkin-comment">Comments: <%= checkin.comment %>
        </li>
        <li class="list-group-item" id="checkin-parking"><%= checkin.parking ? 'Has convenient parking' : 'Does not have convenient parking' %>
        </li>
      </ul>
      <div class="card-body">
        <% if (checkin.owner.equals(user?.profile._id)) { %> 
        <form action="/checkins/<%= checkin._id %>/edit" method="GET">
          <button class="card-button" type="submit">Edit</button>
        </form>
        <form action="/checkins/<%= checkin._id %>?_method=DELETE" method="POST">
          <button class="card-button" type="submit">Delete</button>
        <% } %>
    </div>
    <% } %>
    <% }) %>
</main>

<%- include('../partials/footer') %>